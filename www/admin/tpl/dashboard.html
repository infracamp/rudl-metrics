
<template is="ka-tpl" auto>
    <script>
        ((self) => {

            ka_http_req("/admin/api/query?q=:query", {"query": "select sum(tot.req) as totreq, sum(tot.req500) as tot500, sum(tot.bytesin) as bytesin, sum(tot.bytesout) as bytesout from cloudfront_stats_cluster_min WHERE time > now()-24h"}).json = (r) => {
                self.$scope.cfstat = r.result[0];
            };


        })(KASELF);

    </script>
    <div class="card-group mb-4" *if="typeof cfstat !== 'undefined'">
        <div class="card">
            <div class="card-body">
                <div class="text-muted text-right mb-4">

                </div>
                <div class="text-value-lg">{{ cfstat.totreq }}</div><small class="text-muted text-uppercase font-weight-bold">Total requests</small>
                <div class="progress progress-xs mt-3 mb-0">
                    <div class="progress-bar bg-gradient-info" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <div class="text-muted text-right mb-4">

                </div>
                <div class="text-value-lg">{{ parseFloat(parseInt(cfstat.bytesin) / 1024 / 1024).toFixed(2) }} MB</div><small class="text-muted text-uppercase font-weight-bold">Traffic inbound</small>
                <div class="progress progress-xs mt-3 mb-0">
                    <div class="progress-bar bg-gradient-success" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <div class="text-muted text-right mb-4">

                </div>
                <div class="text-value-lg">{{ parseFloat(parseInt(cfstat.bytesout) / 1024 / 1024).toFixed(2) }} MB</div><small class="text-muted text-uppercase font-weight-bold">Traffic outbound</small>
                <div class="progress progress-xs mt-3 mb-0">
                    <div class="progress-bar bg-gradient-warning" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <div class="text-muted text-right mb-4">

                </div>
                <div class="text-value-lg">{{ parseFloat( parseInt(cfstat.tot500)/parseInt(cfstat.totreq)).toFixed(3) }}%</div><small class="text-muted text-uppercase font-weight-bold">Error ratio (500)</small>
                <div class="progress progress-xs mt-3 mb-0">
                    <div class="progress-bar" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>
        <div class="card">
            <div class="card-body">
                <div class="text-muted text-right mb-4">

                </div>
                <div class="text-value-lg">5:34:11</div><small class="text-muted text-uppercase font-weight-bold">Avg. Time</small>
                <div class="progress progress-xs mt-3 mb-0">
                    <div class="progress-bar bg-gradient-danger" role="progressbar" style="width: 25%" aria-valuenow="25" aria-valuemin="0" aria-valuemax="100"></div>
                </div>
            </div>
        </div>
    </div>
</template>



<template is="ka-tpl" auto="">

</template>


<div class="row">
    <div class="col-12">


    </div>
</div>

