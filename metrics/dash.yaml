
dashboards:
  main:

  - name: Services
    type: list
    elements:
    - name: infracamp
      template: chart/service.yaml
      source: /api/data/service.json
      query: https://infracamp.org
      select:
      - time
      - connect
      - lookup
      append: true


    - name: ulan
      template: chart/service.yaml
      source: /api/data/service.json
      query: http://ulan.talpa-services.de
      select:
      - time
      - connect
      - lookup
      append: true
      interval: 15

    - name: tadis
      template: chart/service.yaml
      source: /api/data/service.json
      query: http://tadis.talpa-services.de
      select:
      - time
      - connect
      - lookup
      append: true
      interval: 15

    - name: rsync-ssh1
      template: chart/service.yaml
      source: /api/data/service.json
      query: http://rsync-ssh1.talpa-services.de
      select:
      - time
      - connect
      - lookup
      append: true
      interval: 15

    - name: t4s
      template: chart/service.yaml
      source: /api/data/service.json
      query: http://login.talpa-services.de
      select:
      - time
      - connect
      - lookup
      append: true
      interval: 15

    - name: ulan-new
      template: chart/service.yaml
      source: /api/data/service.json
      query: https://ulan-new.talpa-services.de
      select:
      - time
      - connect
      - lookup
      append: true
      interval: 15

    - name: tadis-new
      template: chart/service.yaml
      source: /api/data/service.json
      query: https://tadis-new.talpa-services.de
      select:
      - time
      - connect
      - lookup
      append: true
      interval: 15

    - name: flesto
      template: chart/service.yaml
      source: /api/data/service.json
      query: http://flesto.talpa-services.de
      select:
      - time
      - connect
      - lookup
      append: true
      interval: 15

    - name: cockpit talpa.io
      template: chart/service.yaml
      source: /api/data/service.json
      query: http://cockpit.talpa.io
      select:
      - time
      - connect
      - lookup
      append: true
      interval: 15

    - name: t4s-cockpit
      template: chart/service.yaml
      source: /api/data/service.json
      query: https://settings.talpa-services.de
      select:
      - time
      - connect
      - lookup
      append: true
      interval: 15

    - name: tmac
      template: chart/service.yaml
      source: /api/data/service.json
      query: https://tmac.talpa-services.de
      select:
      - time
      - connect
      - lookup
      append: true
      interval: 15

    - name: talpalytics
      template: chart/service.yaml
      source: /api/data/service.json
      query: https://talpalytics.talpa-services.de
      select:
      - time
      - connect
      - lookup
      append: true
      interval: 15

    - name: timeh
      template: chart/service.yaml
      source: /api/data/service.json
      query: https://timeh-new.talpa-services.de
      select:
      - time
      - connect
      - lookup
      append: true
      interval: 15

    - name: metrics
      template: chart/service.yaml
      source: /api/data/service.json
      query: https://metrics.jupp.talpa-services.de
      select:
      - time
      - connect
      - lookup
      append: true
      interval: 15

  - name: Cloudfront
    type: list
    elements:
      - name: req_total (12h/15m)
        template: chart/default.yaml
        source: /api/data/stats.json
        query: SELECT count(status) as num FROM syslog WHERE time > now() - 12h GROUP BY time(15m)
        select:
          - num

      - name: req_total_500 (12h/15m)
        template: chart/default.yaml
        source: /api/data/stats.json
        query: SELECT count(status) as num FROM syslog WHERE time > now() - 12h AND status=500 GROUP BY time(15m)
        select:
          - num


      - name: req_total_404 (12h/15m)
        template: chart/default.yaml
        source: /api/data/stats.json
        query: SELECT count(status) as num FROM syslog WHERE time > now() - 12h AND status=404 GROUP BY time(15m)
        select:
          - num

      - name: total_mb_in (12h/15m)
        template: chart/default.yaml
        source: /api/data/stats.json
        query: SELECT sum(request_length) / 1024 / 1024 as num FROM syslog WHERE time > now() - 12h GROUP BY time(15m)
        select:
        - num

      - name: total_mb_in (12h/15m)
        template: chart/default.yaml
        source: /api/data/stats.json
        query: SELECT sum(bytes_sent) / 1024 / 1024 as num FROM syslog WHERE time > now() - 12h GROUP BY time(15m)
        select:
        - num

  - name: Nodes
    type: html
    elements:
    - name: wurst
      source: /api/data/html/nodes
    interval: 5

  - name: Gitlab
    type: html
    elements:
    - name: wurst
      source: /api/data/html/gitlab-pipeline
    interval: 30




